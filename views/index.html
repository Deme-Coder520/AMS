<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>后台管理页面</title>
    <link rel="stylesheet" type="text/css" href="/static/css/reset.css">
    <link rel="stylesheet" type="text/css" href="/static/css/main.css">
    <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.js"></script>
    <script type="text/javascript" src="/static/layer/layer.js"></script>
</head>
<body>

    <div class="header">
        <a href="#" class="logo fl"><img src="/static/img/logo.png" alt="logo"></a>
        <a href="#" class="logout fr">退 出</a>
    </div>
    
    <div class="side_bar">
        <div class="user_info">
            <img src="/static/img/java.jpg" alt="张大山">
            <p>欢迎你 <em>java</em></p>
        </div>

        <div class="menu_con">
            <div class="first_menu active"><a href="javascript:;" class="icon02">文章管理</a></div>
            <ul class="sub_menu show">
                <li><a href="/index" class="icon031">文章列表</a></li>
                <li><a href="/addArticle" class="icon032">添加文章</a></li>
                <li><a href="/addType" class="icon034">添加分类</a></li>
            </ul>
        </div>
    </div>

    <div class="main_body" id="main_body">
        <div class="breadcrub">
            当前位置：文章管理>文章列表
        </div>
        <div class="pannel">
            <span class="sel_label">请选择文章分类：</span>
            <form id="form" method="post" action="/index">
            <select name="select" id="select" class="sel_opt">
                {{range .types}}
                <option>{{.TypeName}}</option>
                {{end}}
                <option selected="true">选择类型</option>
            </select>
            </form>
            {{.code}}
            <table class="common_table">
                <tr>
                    <th width="43%">文章标题</th>
                    <th width="10%">文章内容</th>
                    <th width="16%">添加时间</th>
                    <th width="7%">阅读量</th>
                    <th width="7%">删除</th>
                    <th width="7%">编辑</th>
                    <th width="10%">文章类型</th>
                </tr>
                {{range .articles}}
                <tr>
                    <td>{{.ArtName}}</td>
                    <td><a href="/content?id={{.Id}}">查看详情</a></td>
                    <td> {{.ArtCreateAt.Format "2006-01-02 15:04:05"}}</td>
                    <td>{{.ArtCount}}</td>
                    <td><a href="/delete?id={{.Id}}" class="del">删除</a> </td>
                    <td><a href="/edit?id={{.Id}}">编辑</a></td>
                    <td>{{.ArtType.TypeName}}</td>
                </tr>
                        {{end}}
            </table>

            <ul class="pagenation">
                <li>共{{.count}}条记录</li>
                <li><button onclick="first()"> << </button></li>
                {{if .isFirstPage}}
                    <li><button disabled="true"> < </button></li>
                {{else}}
                    <li><button onclick="pre()"> < </button></li>
                {{end}}
                <li>{{.pageIndex}}/{{.pageCount}}页</li>
                {{if .isLastPage}}
                    <li><button disabled="true"> > </button></li>
                {{else}}
                    <li><button onclick="next()"> > </button></li>
                {{end}}
                <li><button onclick="last()"> >> </button></li>
            </ul>
        </div>
    </div>
</body>

<script>
    //设置跳转首页
    function first() {
        window.location.href="/index?pi=1"
    }
    //跳转上一页
    function pre() {
        window.location.href="/index?pi={{.pageIndex | PrePage}}"
    }
    //跳转下一页
    function next() {
        window.location.href="/index?pi={{.pageIndex | NextPage}}"
    }
    //跳转末页
    function last() {
        window.location.href="/index?pi={{.pageCount}}"
    }
   //删除文章弹窗确认（也可window.onload =）
   $(function () {
       $(".del").click(function () {
           if (!confirm("是否确认删除？")) {
               return false
           }
       })
       // 实现文章类型的查询
       $("#select").change(function () {
           $("#form").submit()//实现表单提交
       })
   })

</script>

</html>